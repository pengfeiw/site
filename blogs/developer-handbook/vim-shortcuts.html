<html lang="zh_cn"><head><title>vim 快捷键之高效编程 | 王鹏飞</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="vim,tricks,vscode vim,快捷键,short cuts"><meta name="description" content="vim 使用技巧，高效编辑代码"><link rel="stylesheet" href="/blogs/assests/code_github.css"><link rel="stylesheet" href="/blogs/assests/github_markdown.css"><link rel="stylesheet" href="/blogs/assests/article.css"><link rel="stylesheet" href="/blogs/assests/navigator.css"><link rel="icon" href="/blogs/assests/images/icon.jpg"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("search-input").addEventListener("search",e=>{e.target.value&&window.open(`https://bing.com/search?q=${e.target.value}%20site%3A+pengfeixc.com`,"_blank")})})</script></head><body><div class="header"><div class="navigator"><div class="links"><div class="home"><a href="/blogs">Home</a></div><div class="email"><a href="mailto:pengfeixc@sina.com">Email</a></div><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div clss="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="search"><input id="search-input" type="search" placeholder="search"></div><div class="rss"><a href="/blogs/rss.xml"><img src="/blogs/assests/images/rss.svg" alt="rss"></a></div></div></div></div><div class="markdown"><div class="markdown-header"><span class="date">日期：2022年7月2日</span><span class="category"><a href="/blogs/developer-handbook">标签：Developer</a></span></div><div class="markdown-body"><h1 id="vim 使用技巧">vim 使用技巧 <a href="#vim 使用技巧">#</a></h1><p>下面的命令是我常用的一些快捷键操作，我使用的编辑器是 vscode，安装了 vim 插件。</p><blockquote><p>如何在 vscode 中使用 vim？可以看看我的 <a href="https://www.pengfeixc.com/blogs/developer-handbook/vscode-configurations">vscode 配置</a></p></blockquote><h2 id="光标移动">光标移动 <a href="#光标移动">#</a></h2><ul><li><code>hjkl</code>：左下上右</li><li><code>gj</code> 和 <code>gk</code>：移动至下一个或者上一个物理行，当一行出现 linewrap 时，使用 <code>j</code> 和 <code>k</code> 并不能按照视觉看到的一行进行移动</li><li><code>{</code>：跳转至向上寻找的第一个段落首部的前一行</li><li><code>}</code>：跳转至向下寻找的第一个段落尾部的后一行</li><li><code>(</code>：跳转至向上寻找的第一个段落首部的所在行</li><li><code>)</code>：跳转至向下寻找的第一个段落尾部的所在行</li><li><code>w</code>：下一个单词开头</li><li><code>b</code>：上一个单词开头</li><li><code>e</code>：下一个单词结尾</li><li><code>ge</code>：上一个单词结尾</li><li><code>gg</code>：跳转到第一行</li><li><code>G</code>：跳转到最后一行</li><li><code>&lt;number&gt; + gg</code>：跳转到第 number 行</li><li><code>:&lt;number&gt;</code>：跳转到第 number 行</li><li><code>%</code>：匹配对应括号，并进行跳转</li><li><code>*</code> 和 <code>#</code>：匹配当前光标所在的单词，移动光标到下一个或上一个</li></ul><h2 id="%3Ccode%3Ef%3C/code%3E%E3%80%81%3Ccode%3EF%3C/code%3E%E3%80%81%20%3Ccode%3Et%3C/code%3E%20%E5%92%8C%20%3Ccode%3ET%3C/code%3E%EF%BC%8C%E8%A1%8C%E5%86%85%E5%85%89%E6%A0%87%E8%B7%B3%E8%BD%AC"><code>f</code>、<code>F</code>、 <code>t</code> 和 <code>T</code>，行内光标跳转 <a href="#%3Ccode%3Ef%3C/code%3E%E3%80%81%3Ccode%3EF%3C/code%3E%E3%80%81%20%3Ccode%3Et%3C/code%3E%20%E5%92%8C%20%3Ccode%3ET%3C/code%3E%EF%BC%8C%E8%A1%8C%E5%86%85%E5%85%89%E6%A0%87%E8%B7%B3%E8%BD%AC">#</a></h2><ul><li><code>f</code>：当前行跳转到光标后的指定字符，按 <code>;</code> 跳转到下一个指定字符</li><li><code>F</code>：当前行跳转到光标前的指定字符，按 <code>;</code> 跳转到下一个指定字符</li><li><code>t</code>：当前行跳转到光标后的指定字符前的一个字符，按 <code>;</code> 跳转到下一个指定字符前一个字符</li><li><code>T</code>：当前行跳转到光标前的指定字符后的一个字符，按 <code>;</code> 跳转到下一个指定字符后一个字符</li></ul><p>一般，我只用 <code>f</code> 和 <code>F</code>。</p><h2 id="模式切换">模式切换 <a href="#模式切换">#</a></h2><p><code>v</code>：normal 模式进入 visual 模式 <code>V</code>: normal 模式进入 visual 模式，并选中当前行 <code>i</code>: normal 模式进入 insert 模式，光标出现在当前选中字符前 <code>I</code>: normal 模式进入 insert 模式，光标出现在行首 <code>a</code>: normal 模式进入 insert 模式，光标出现在当前选中字符后 <code>A</code>: normal 模式进入 insert 模式，光标出现在行尾 <code>esc</code>: 从 visual 和 insert 模式退回到 normal 模式 <code>o</code>：在当前行下方插入一行，并进入 insert 模式 <code>O</code>：在当前行上方插入一行，并进入 insert 模式</p><h2 id="插入、删除、复制、粘贴">插入、删除、复制、粘贴 <a href="#插入、删除、复制、粘贴">#</a></h2><p>在模式切换中已经包含了插入的相关快捷键。</p><ul><li><code>gi</code>：在上一个做出变化的地方进入插入模式</li><li><code>x</code>：删除当前光标所在的字符</li><li><code>dd</code>：删除当前行</li><li><code>cc</code>：删除当前行，并进入 insert 模式</li><li><code>D</code>：删除从当前光标至行尾的内容</li><li><code>C</code>：删除从当前贯标至行尾的内容，并进入 insert 模式</li><li><code>yy</code>：复制当前行</li><li><code>Y</code>：与 <code>yy</code> 相同</li><li><code>yl</code>：复制当前光标下的字符</li><li><code>yas</code>：复制一个句子</li><li><code>yap</code>：复制一个段落</li><li><code>p</code>: 粘贴剪切板至光标后</li><li><code>P</code>：粘贴剪切板至光标前</li><li><code>gP</code>: 与 <code>P</code> 相同，只不过将光标置于粘贴内容的后面</li><li><code>gp</code>: 与 <code>p</code> 相同，只不过将光标置于粘贴内容的后面</li><li><code>cw</code>：删除从光标所在位置后到一个单词的结尾，并进入 insert 模式（同理可以用 <code>dw</code> 删除，但是不进入 insert 模式）</li><li><code>c$</code>：删除从光标所在位置后到本行结尾，并进入 insert 模式（同理可以用 <code>d$</code> 删除，但是不进入 insert 模式）</li><li><code>r</code>：替换当前光标下的字符，按下 <code>r</code>，然后输入一个字符，用来替换当前字符</li><li><code>v + &lt;select area&gt; + &lt;action&gt;</code>：可以使用 v 进入 visual 模式，然后选中区域，最后使用 <code>y</code>、<code>c</code>、<code>d</code> 和 <code>r</code> 对选中区域进行操作。</li></ul><blockquote><p><code>&lt;command&gt;&lt;pos&gt;</code> 模式：<code>&lt;command&gt;</code> 可以是 <code>y</code>、<code>d</code>、<code>c</code>等，<pos>（可以用于光标跳转的一系列字符） 可以是 <code>w</code>（一个单词的结尾）、<code>$</code>（行尾）、<code>^</code>（行首第一个非空字符）、<code>b</code>（单词的开头）、<code>0</code>(行首) 等等。</pos></p></blockquote><blockquote><p><code>&lt;verbs&gt;&lt;adjectives&gt;&lt;objects&gt;</code> 模式：你可以将 operator（<code>y</code>，<code>d</code>，<code>c</code>）作为 verbs，count、a 和 i 作为 adjectives，移动（hjkl、w、$、^、b、0等）作为 objects，例如:</p><ul><li><code>d3l</code>: 删除光标右侧三个字符</li><li><code>dl</code>：adjectives 可以省略，所以 <code>dl</code> 等价于 <code>d1l</code></li><li><code>diw</code>：删除光标下的单词不包括周围的空格</li></ul></blockquote><h2 id="代码折叠">代码折叠 <a href="#代码折叠">#</a></h2><ul><li><code>zc</code>：折叠代码</li><li><code>zo</code>: 展开代码</li><li><code>zM</code>: 全部折叠</li><li><code>zR</code>: 全部展开</li></ul><h2 id="窗口移动">窗口移动 <a href="#窗口移动">#</a></h2><p>（1）移动当前所在行的位置</p><ul><li><code>zz</code>：将当前光标所在行移动到窗口中间</li><li><code>zt</code>: 将当前光标所在行移动到窗口顶部</li><li><code>zb</code>: 将当前光标所在行移动到窗口底部</li></ul><p>（2）行移动</p><ul><li><code>ctrl + e</code>：一行一行向下移动</li><li><code>ctrl + d</code>：向下移动窗口显示行数的一半</li><li><code>ctrl + y</code>: 一行一行向上移动</li><li><code>ctrl + u</code>: 向上移动窗口显示行数的一半</li></ul><h2 id="分屏操作">分屏操作 <a href="#分屏操作">#</a></h2><p>（1）创建分屏</p><p>使用命令：</p><p><code>:split [file]</code> 或者 <code>:sp [file]</code>：添加一个横屏 <code>:vsplit [file]</code> 或者 <code>:vsp [file]</code>：添加一个竖屏</p><p>使用快捷键：</p><p><code>ctrl + w s</code>：以当前文件添加一个横屏 <code>ctrl + w v</code>：以当前文件添加一个竖屏</p><p>（2）分屏切换</p><p><code>ctrl + w &lt;arrow&gt;</code> 或者 <code>ctrl + w &lt;hjkl&gt;</code> ：将光标移动到指定方向的分屏</p><p>（3）关闭屏幕和分屏</p><p><code>:only</code>：只保留当前分屏，关闭其他分屏 <code>ctrl + w c</code>：关闭当前窗口 <code>ctrl + w q</code>: 关闭当前窗口，若只有一个分屏，则退出 vim <code>ctrl + w o</code>: 关闭其他窗口</p><p>（4）增加屏幕高度</p><p><code>crtrl + w +</code>：增加高度 <code>ctrl + w -</code>：减小高度</p><h2 id="多光标操作（块操作）">多光标操作（块操作） <a href="#多光标操作（块操作）">#</a></h2><ol><li>使用 <code>ctrl + v</code> 进入块操作</li><li>可以使用 <code>hkjl</code>、<code>$</code> 等来插入多光标和移动光标</li><li>使用 <code>I</code> 和 <code>A</code> 进入编辑</li></ol><p>同样可以使用 <code>v</code> 进入 visual 模式，选中一些行，然后按 <code>A</code> 在每行结尾插入光标进行编辑。</p><h2 id="visual 模式下的格式化操作">visual 模式下的格式化操作 <a href="#visual 模式下的格式化操作">#</a></h2><p><code>v</code> 进入 visual 模式，进入 visual 模式后，可以通过 <code>hjkl</code> 选中一些行。可以对选中的行做如下操作。</p><ul><li><code>J</code>：把所有行连接起来变成一行</li><li><code>&lt;</code> 或 <code>&gt;</code>：左右缩进</li><li><code>=</code>：自动缩进，格式化代码（非常 nice）</li></ul><h2 id="查找和替换">查找和替换 <a href="#查找和替换">#</a></h2><p>替换格式如下，支持正则表达式。</p><pre><code class="hljs language-bash">:[range]s/&lt;pattern&gt;/[string]/[flags] [count]
</code></pre><p>该命令表示在 <code>range</code> 的每一行中搜索<code>pattern</code>，并将其替换为 <code>string</code>。 <code>count</code>是一个乘以命令的正整数。</p><p>（1）查找</p><ul><li><code>/&lt;pattern&gt;</code>：高亮查找到的内容</li><li><code>/\C&lt;pattern&gt;</code>：大小写敏感</li><li><code>/\c&lt;pattern&gt;</code>: 忽略大小写</li><li><code>/\&lt;&lt;pattern&gt;\&gt;</code>: 整词匹配，注意这里前面是修饰符 <code>\&lt;</code>，后面是修饰符 <code>\&gt;</code>，两个组合表示整词匹配（whole word match）</li><li><code>*</code>：向下查找当前光标下的 word</li><li><code>#</code>：向上查找当前光标下的 word</li><li><code>n</code>：跳转到下一个查找到的内容</li><li><code>:nohl</code>：取消高亮</li></ul><p>（2）当前行替换</p><p><code>:s/foo/bar/</code>：替换当前行查到的<strong>第一个</strong> <code>foo</code>，并将其替换为 <code>bar</code> <code>:s/foo/bar/g</code>：替换当前行查到的所有 <code>foo</code>，并将其替换为 <code>bar</code></p><p>（3）全文件替换</p><p><code>:%s/foo/bar/</code>：替换当前文件中所有行的<strong>第一个</strong> <code>foo</code>，将它们替换为 <code>bar</code> <code>:%s/foo/bar/g</code>：替换当前文件中所有行的 <code>foo</code>，将它们替换为 <code>bar</code></p><p>（4）<code>c</code> flag</p><p><code>:%s/foo/bar/gc</code>使用 <code>c</code> 标记可以依次确认每个替换。会弹出 <code>replace with foo(y/n/a/q/l)?</code> 确认对话框，按 <code>y</code> 替换匹配项，或按 <code>l</code> 替换匹配项并退出。 按 <code>n</code> 跳过当前匹配，按 <code>q</code> 或 <code>Esc</code> 退出替换。 <code>a</code> 选项替换匹配项和所有剩余匹配项。</p><p>（5）<code>i</code> flag 开启大小写敏感</p><p><code>:s/foo/bar/gc</code>: <code>foo</code> 不会匹配 <code>Foo</code></p><p>（6）指定查询范围</p><p><code>:3,10s/foo/bar/g</code>：查询范围为第三行到第十行，将该范围内的 <code>foo</code> 替换为 <code>bar</code> <code>:.,$s/foo/bar/</code>：查询范围为当前行到最后一行，将该范围内的 <code>foo</code> 替换为 <code>bar</code>，<code>.</code> 表示当前行，<code>$</code> 表示最后一行 <code>:.,+4s/foo/bar/g</code>：查询范围为从当前行开始往下数四行（总共四行），将该范围内的 <code>foo</code> 替换为 <code>bar</code>，<code>.</code> 表示当前行，<code>+4</code> 表示接下来的四行</p><h2 id="%3Ccode%3E<start%20position><command><end%20position>%3C/code%3E"><code>&lt;start position&gt;&lt;command&gt;&lt;end position&gt;</code> <a href="#%3Ccode%3E<start%20position><command><end%20position>%3C/code%3E">#</a></h2><p>例如 <code>0y$</code>，表示拷贝当前行。</p><ul><li><code>0</code>：先到行首</li><li><code>y</code>: 从 <code>&lt;start position&gt;</code> 开始拷贝，这里是行首</li><li><code>$</code>：表示一直拷贝到行尾</li></ul><p>" hello "</p><h2 id="%3Ccode%3E<command><a%20%7C%20i%20%7C%20s><obj>%3C/code%3E"><code>&lt;command&gt;&lt;a | i | s&gt;&lt;obj&gt;</code> <a href="#%3Ccode%3E<command><a%20%7C%20i%20%7C%20s><obj>%3C/code%3E">#</a></h2><blockquote><p><code>s</code> 需要插件支持，vscode-vim 自带这个功能</p></blockquote><p><code>a</code> 表示 around，<code>i</code> 表示 inner，<code>s</code> 表示 surround，<code>command</code> 可以是 <code>d</code> <code>c</code> <code>y</code>，<code>obj</code> 可以是引号、双引号、<code>w</code> 和 <code>t</code>，<code>t</code> 表示 tag，对 html 这种标记语言比较有用</p><ul><li><code>diw</code>：删除单词，不包括单词周围的符号，例如 <code>" word "</code>，光标在 <code>w</code>,删除后变成了 <code>" "</code></li><li><code>daw</code>：删除当前单词，包括周围的空白字符，例如 <code>" word "</code>，光标在 <code>w</code>,删除后变成了 <code>""</code></li><li><code>da"</code>: 删除双引号中间的内容，包括双引号本身，例如 <code>" word "</code>，光标在 <code>w</code>,删除后变成了 ``</li><li><code>di"</code>: 删除双引号中间的内容，不包括双引号本身，例如 <code>" word "</code>，光标在 <code>w</code>,删除后变成了 <code>""</code></li><li><code>ds"</code>：删除当前单词周围的双引号，例如 <code>" word "</code>，光标在 <code>w</code>,删除后变成了 <code>w</code></li></ul><p>如果把上面的 command <code>d</code> 换成 <code>c</code>，那么删除后会进入到插入模式。</p><p><code>s</code> 对写 html 这种标记语言非常有用，例如将下面的 <code>div</code> 改成 <code>p</code>，可以使用 <code>cstt</code>，然后输入 <code>p</code>，<code>c</code> 表示 <code>change</code></p><pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    这是一个段落
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><p>:</p><h2 id="Peek definition 和 go to definiton">Peek definition 和 go to definiton <a href="#Peek definition 和 go to definiton">#</a></h2><ul><li><code>gh</code>：类似于鼠标悬浮，会弹出定义窗口</li><li><code>gd</code>：跳转到定义和引用</li></ul><h2 id="其他">其他 <a href="#其他">#</a></h2><ul><li><code>:edit [file-path]</code>：编辑已存在的文件或者新建一个文件</li></ul><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/blogs/site/big-company-vs-small-company">上一篇：去大公司还是小公司</a></span><span class="next-article"><a href="/blogs/javascript/legacy-javascript-decorator">下一篇：【Legacy】JavaScript Decorator</a></span></div></div><div class="footer">@2020-2023 Wang Pengfei</div></body></html>