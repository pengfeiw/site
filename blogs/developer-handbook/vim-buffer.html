<html lang="zh_cn"><head><title>vim buffer | 王鹏飞</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="vim,neovim,buffer"><meta name="description" content="如何使用 vim(neovim) 中的 buffer"><link rel="stylesheet" href="/blogs/assests/code_github.css"><link rel="stylesheet" href="/blogs/assests/github_markdown.css"><link rel="stylesheet" href="/blogs/assests/article.css"><link rel="stylesheet" href="/blogs/assests/navigator.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="icon" href="/blogs/assests/images/icon.jpg"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("search-input").addEventListener("search",e=>{e.target.value&&window.open(`https://bing.com/search?q=${e.target.value}%20site%3A+pengfeixc.com`,"_blank")})})</script></head><body><div class="header"><div class="navigator"><div class="links"><div class="home"><a href="/blogs">Home</a></div><div class="email"><a href="mailto:pengfeixc@sina.com">Email</a></div><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div clss="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="search"><input id="search-input" type="search" placeholder="search"></div><div class="rss"><a href="/blogs/rss.xml"><img src="/blogs/assests/images/rss.svg" alt="rss"></a></div></div></div></div><div class="body"><div class="nothing"></div><div class="markdown"><div class="markdown-header"><span class="date">日期：2023年12月2日</span><span class="category"><a href="/blogs/developer-handbook">标签：Developer</a></span></div><div class="markdown-body"><h1 id="vim buffer">vim buffer <a href="#vim buffer">#</a></h1><p>如果你使用 （neo)vim 作为你的编辑器，首先你必须理解 buffer、tab 和 window 的概念。</p><ul><li>buffer: 当用 vim 打开一个文件编辑时，编辑的对象并不是源文件，vim 会先将文件加载到内存中，用户编辑的数据存储再 buffer 中，使用 <code>:w</code> 可以将 buffer 中的数据写入，使用 <code>:q!</code> 表示退出并丢弃 buffer 中的内容。</li><li>window: window 就是 buffer 的视口，用于显示 buffer 的内容，一个 buffer 可以显示在多个 window 中，也可以多个 window 显示不同的 buffer</li><li>tab: tab 页是一组 window</li></ul><h2 id="什么是 buffer">什么是 buffer <a href="#什么是 buffer">#</a></h2><p>每个 buffer 有一个特殊的数字表示，并且有可以有三种状态：active、inactive 和 hidden。</p><ul><li>active：显示在窗口中的 buffer</li><li>hidden: 没有显示在窗口中的 buffer</li><li>inactive：没有显示，并且没有任何东西，没有与某个文件进行绑定</li></ul><p>如果此时有一个处于 hidden 状态，并且内容已经被更改的 buffer，使用 <code>:q</code> 命令退出 neovim 时，neovim 会给出一个错误信息，指引我们可以将 buffer 中的内容写入（:wq）或者退出不写入(:q)。</p><h2 id="命令">命令 <a href="#命令">#</a></h2><ul><li><code>:buffer</code> 或者 <code>:ls</code>: 列出所有 buffer, 每个 buffer 都有一个数字标识</li></ul><pre><code class="hljs language-bash"><span class="hljs-comment"># `:ls` 列出所有 buffer</span>
<span class="hljs-comment"># a 表示 active buffer</span>
<span class="hljs-comment"># 每个 buffer 有一个数字标识</span>
:<span class="hljs-built_in">ls</span>
  1 %a + <span class="hljs-string">"docs/开发者笔记/vim buffer.md"</span> line 29
 13 <span class="hljs-comment">#h   "~/projects/program/site-generator/docs/开发者笔记/Vscode Neovim.md" line 1</span>
</code></pre><ul><li><code>:b &lt;number&gt;</code>: 显示指定数字代表的 buffer</li><li><code>:b &lt;partial name&gt;</code>：显示指定文件名称代表的 buffer，支持模糊匹配</li><li><code>:new</code>：在水平 split window 创建一个 buffer</li><li><code>:vnew</code>: 在竖直 split window 创建一个 buffer</li><li><code>:enew</code>: 在新的 window 创建一个 buffer</li><li><code>:bp</code>: 切换到前一个 buffer</li><li><code>:bn</code>: 切换到后一个 buffer</li><li><code>:bf</code>: 切换到第一个 buffer</li><li><code>:bl</code>: 切换到最后一个 buffer</li><li><code>:bd</code>: 移除一个 buffer</li><li><code>:w</code>: 将当前 buffer 中的内容写入文件，保存</li><li><code>:q</code>: 退出当前 buffer，如果 buffer 中有未保存的内容，退出失败</li><li><code>:q!</code>: 强制退出当前 buffer，不保存 buffer 中的内容</li><li><code>:wa</code>: 将所有 buffer 中的变更写入文件，并保存</li><li><code>:xa</code>: 将所有 buffer 中的变更写入文件，保存并退出</li><li><code>:qa!</code>: 退出，并丢弃 buffer 中的变更</li><li><code>:qa</code>: 退出所有 buffer，如果有未保存的 buffer，退出失败</li></ul><h2 id="插件">插件 <a href="#插件">#</a></h2><p>1、<a href="https://github.com/akinsho/bufferline.nvim">bufferline</a></p><p>以顶部 tab 的形式显示打开的 buffer。并且显示 buffer 的状态，buffer 是否未保存。</p><p>2、<a href="https://github.com/nvim-telescope/telescope.nvim">telescope</a></p><p>支持文件搜索，文件内容搜索和 buffer 搜索。</p><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/blogs/computer-graphics/constructive-solid-geometry">上一篇：构造立体几何法（Constructive Solid Geometry） —— 计算机几何</a></span><span class="next-article"><a href="/blogs/computer-graphics/parametric-curve-review">下一篇：参数化曲线</a></span></div></div><div class="toc"><div class="toc-header">目录</div><div class="toc-body"><div class="toc-item"><a class="toc-item-link" href="#vim buffer" style="padding-left:15px">vim buffer</a></div><div class="toc-item"><a class="toc-item-link" href="#什么是 buffer" style="padding-left:30px">什么是 buffer</a></div><div class="toc-item"><a class="toc-item-link" href="#命令" style="padding-left:30px">命令</a></div><div class="toc-item"><a class="toc-item-link" href="#插件" style="padding-left:30px">插件</a></div></div></div></div></body></html>