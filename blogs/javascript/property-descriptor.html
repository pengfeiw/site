<html lang="zh_cn"><head><title>Property descriptor | WANG_PF.OS.BLOGS</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="property,descriptor,属性,描述,javascript"><meta name="description" content="详解 JavaScript 对象的 Property Descriptor"><link rel="stylesheet" href="/blogs/assests/style/code_github.css"><link rel="stylesheet" href="/blogs/assests/style/markdown.css"><link rel="stylesheet" href="/blogs/assests/style/article.css"><link rel="stylesheet" href="/blogs/assests/style/navigator.css"><link rel="stylesheet" href="/blogs/assests/style/global.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="icon" href="/blogs/assests/images/icon.jpg"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("search-input");t.addEventListener("keydown",function(e){"Enter"===e.key&&t.value&&window.open(`https://bing.com/search?q=${t.value}%20site%3A+pengfeixc.com`,"_blank")}),document.querySelectorAll(".markdown-body pre").forEach(function(t){var e=document.createElement("div");e.className="code-block-wrapper",t.parentNode.insertBefore(e,t),e.appendChild(t);const n=document.createElement("button");n.className="code-copy-btn",e.appendChild(n),n.addEventListener("click",async function(){var e=t.querySelector("code");if(e)try{await navigator.clipboard.writeText(e.textContent),n.classList.add("copied"),setTimeout(function(){n.classList.remove("copied")},2e3)}catch(e){console.error("Failed to copy:",e)}})})})</script></head><body><div class="header"><div class="navigator"><div class="nav-sections"><div class="home"><a href="/blogs">Home</a></div><div class="email"><a href="mailto:pengfeixc@sina.com">Email</a></div><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div class="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="rss"><a href="/blogs/rss.xml">RSS</a></div><div class="search-wrapper"><input id="search-input" type="search" placeholder="search"></div></div></div></div><div class="body"><div class="markdown"><div class="markdown-header"><span class="date">日期：2022年4月30日</span><span class="category"><a href="/blogs/javascript">标签：JavaScript</a></span></div><div class="markdown-body"><h1 id="JavaScript 对象的 Property Descriptor">JavaScript 对象的 Property Descriptor <a href="#JavaScript 对象的 Property Descriptor">#</a></h1><blockquote><p>JavaScript 本质上是存储键值对的数据结构，但是与 map 和 dictionary 不同的是，JavaScript 对象是高度可配置的。</p></blockquote><p>当创建一个对象时，并给这个对象添加属性时，每个属性都会有一个默认的与之关联的 <strong>property descriptor</strong>，property descriptor 是一个 javascript 对象，包含了对应属性的一些信息，例如 <code>value</code>。</p><h2 id="%3Ca%20href=%22https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor%22%3E%3Ccode%3EObject.getOwnPropertyDescriptor%3C/code%3E%3C/a%3E"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor"><code>Object.getOwnPropertyDescriptor</code></a> <a href="#%3Ca%20href=%22https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor%22%3E%3Ccode%3EObject.getOwnPropertyDescriptor%3C/code%3E%3C/a%3E">#</a></h2><p>为了获得属性的 property descriptor，可以通过 <code>Object</code> 的静态方法 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor"><code>Object.getOwnPropertyDescriptor</code></a>。</p><pre><code class="hljs language-javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(obj, prop);
</code></pre><p><code>Object.getOwnPropertyDescriptor</code> 返回的对象就是 property descriptor，property descriptor包含了以下几个属性用来描述与之关联的对象属性：</p><ul><li><code>value</code>：属性的当前值</li><li><code>writable</code>：表示是否允许给属性赋值</li><li><code>enumerable</code>：表示属性是否可枚举， <code>true</code> 表示该属性是可枚举属性，那么这个属性会在 <code>for in</code> 和 <code>for of</code> 循环或者 <code>object.keys</code> 中出现。</li><li><code>configurable</code>：表示属性是否可配置，<code>true</code> 表示用户有权限改变该属性的 <strong>property descriptor</strong> 中的值，例如 <code>writable</code> 和 <code>enumerable</code> 的值， <code>false</code> 则表示不可配置，无权限。</li></ul><h2 id="%3Ca%20href=%22https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty%22%3E%3Ccode%3EObject.defineProperty%3C/code%3E%3C/a%3E"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty</code></a> <a href="#%3Ca%20href=%22https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty%22%3E%3Ccode%3EObject.defineProperty%3C/code%3E%3C/a%3E">#</a></h2><p>可以通过 <code>Object.defineProperty</code> 给对象定义一个新的属性或者更新一个已存在属性的 descriptor。</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> myObj = {
    <span class="hljs-attr">p1</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">p2</span>: <span class="hljs-number">2</span>
};

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(myObj, <span class="hljs-string">"p1"</span>, {
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>
});

<span class="hljs-comment">// TypeError: Cannot assign to read only property "p1" of object</span>
myObj.<span class="hljs-property">p1</span> = <span class="hljs-number">2</span>;
</code></pre><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/blogs/developer-handbook/git-commands">上一篇：Git 命令</a></span><span class="next-article"><a href="/blogs/javascript/decorator">下一篇：JavaScript Decorator</a></span></div></div><div class="toc"><div class="toc-header">目录</div><div class="toc-body"><div class="toc-item"><a class="toc-item-link" href="#JavaScript 对象的 Property Descriptor" style="padding-left:15px">JavaScript 对象的 Property Descriptor</a></div><div class="toc-item"><a class="toc-item-link" href="#%3Ca%20href=%22https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor%22%3E%3Ccode%3EObject.getOwnPropertyDescriptor%3C/code%3E%3C/a%3E" style="padding-left:30px">Object.getOwnPropertyDescriptor</a></div><div class="toc-item"><a class="toc-item-link" href="#%3Ca%20href=%22https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty%22%3E%3Ccode%3EObject.defineProperty%3C/code%3E%3C/a%3E" style="padding-left:30px">Object.defineProperty</a></div></div></div></div></body></html>