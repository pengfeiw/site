<html lang="zh_cn"><head><title>package.json 指南 | WANG_PF.OS.BLOGS</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="package,package.json,npm 配置,npm,dependencies,devDependencies"><meta name="description" content="工欲善其事必先利其器，一篇关于 package.json 配置的文章。"><link rel="stylesheet" href="/blogs/assests/style/code_github.css"><link rel="stylesheet" href="/blogs/assests/style/markdown.css"><link rel="stylesheet" href="/blogs/assests/style/article.css"><link rel="stylesheet" href="/blogs/assests/style/navigator.css"><link rel="stylesheet" href="/blogs/assests/style/global.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="icon" href="/blogs/assests/images/icon.jpg"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("search-input");t.addEventListener("keydown",function(e){"Enter"===e.key&&t.value&&window.open(`https://bing.com/search?q=${t.value}%20site%3A+pengfeixc.com`,"_blank")}),document.querySelectorAll(".markdown-body pre").forEach(function(t){var e=document.createElement("div");e.className="code-block-wrapper",t.parentNode.insertBefore(e,t),e.appendChild(t);const n=document.createElement("button");n.className="code-copy-btn",e.appendChild(n),n.addEventListener("click",async function(){var e=t.querySelector("code");if(e)try{await navigator.clipboard.writeText(e.textContent),n.classList.add("copied"),setTimeout(function(){n.classList.remove("copied")},2e3)}catch(e){console.error("Failed to copy:",e)}})})})</script></head><body><div class="header"><div class="navigator"><div class="nav-sections"><div class="home"><a href="/blogs">Home</a></div><div class="email"><a href="mailto:pengfeixc@sina.com">Email</a></div><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div class="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="rss"><a href="/blogs/rss.xml">RSS</a></div><div class="search-wrapper"><input id="search-input" type="search" placeholder="search"></div></div></div></div><div class="body"><div class="markdown"><div class="markdown-header"><span class="date">日期：2022年2月23日</span><span class="category"><a href="/blogs/javascript">标签：JavaScript</a></span></div><div class="markdown-body"><h1 id="package.json 指南">package.json 指南 <a href="#package.json 指南">#</a></h1><h2 id="描述">描述 <a href="#描述">#</a></h2><p><code>package.json</code> 文件必须是一个 JSON 格式的文件，而不是一个 JavaScript Object 对象。</p><p>本节内容将要介绍的大多数要点都与 <a href="https://docs.npmjs.com/cli/v6/using-npm/config">config</a> 里介绍过的配置设置有关。</p><h2 id="name">name <a href="#name">#</a></h2><p>如果你要发布一个包（package），那么 <code>name</code> 和 <code>version</code> 是最重要的，也是必不可少的字段。<code>name</code> 和 <code>version</code> 必须能组合成一个完全唯一的标识符。如果包产生了更新，那么 <code>version</code> 字段必须同时更新，用于产生一个新的唯一的 name-version 标识符。如果你没有打算发布你的包，那么 <code>name</code> 和 <code>version</code> 字段是可选择的。</p><p><code>name</code> 就是包的名称，简称包名。</p><p>一些规则：</p><ul><li>包名的长度必须小于或者等于 214 个字符。包括 scoped packages 的 scope。</li><li>scoped packages 的包名可以以一个点或者下划线开头。改规则不适用于 unscoped 包（非 scoped 包）。</li><li>名称不允许包含大写字母。</li><li>包名可以被当做 URL 的一部分、命令行的一个参数或者一个文件夹的名称。因此，包名不允许包含 non-URL-safe 的字符。</li></ul><p>一些建议：</p><ul><li>不要用 node 核心模块的名字作为包名。</li><li>名称中不要包含 "js" 或者 "node"。包会默认为 js，因为你正在编写一个 <code>package.json</code> 文件，如果你需要指定一个引擎时，可以使用 "engines" 字段。（下面会提到）</li><li>包名会被当做参数传递给 <code>require()</code> 函数，所以名称应该尽量简短，但是需要保证一定的语意。</li><li>命名一个包之前，你可能需要检查 npm 仓库是否已经包含了同名的包。<a href="https://www.npmjs.com/">https://www.npmjs.com/</a></li></ul><p>名称可以选择在前面添加一个 scope，例如 <code>@myorg/mypackage</code>。点击 <a href="https://docs.npmjs.com/cli/v6/using-npm/scope">scope</a> 获取更多细节。</p><h2 id="version">version <a href="#version">#</a></h2><p>如果你要发布一个包（package），那么 <code>name</code> 和 <code>version</code> 是最重要的，也是必不可少的字段。<code>name</code> 和 <code>version</code> 必须能组合成一个完全唯一的标识符。如果包产生了更新，那么 <code>version</code> 字段必须同时更新，用于产生一个新的唯一的 name-version 标识符。如果你没有打算发布你的包，那么 <code>name</code> 和 <code>version</code> 字段是可选择的。</p><p>Version 值必须可以被 <a href="https://github.com/npm/node-semver">node-semver</a> 解析。</p><h2 id="description">description <a href="#description">#</a></h2><p>包的描述，是一个字符串，可以帮助别人发现你的包，可以显示在 <code>npm search</code> 列表中。</p><h2 id="keywords">keywords <a href="#keywords">#</a></h2><p>与包有关的关键字，是一个字符串数组，可以帮助别人发现你的包，可以显示在 <code>npm search</code> 列表中。</p><h2 id="homepage">homepage <a href="#homepage">#</a></h2><p>包的主页 url。</p><p>例如：</p><pre><code class="hljs language-json"><span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/owner/project#readme"</span>
</code></pre><h2 id="bugs">bugs <a href="#bugs">#</a></h2><p>包的问题追踪的页面 url 地址，或者是可以发送 bug 信息的邮件地址。使用这个包的用户如果遇到了 bug 或者其他问题，可以给你发送问题详细信息。</p><p>它应该是这样的：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> 
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/owner/project/issues"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"email"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"project@hostname.com"</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>你可以指定 <code>url</code> 或者 <code>email</code> 字段中的至少一个字段。如果你只想提供一个 url，你可以指定 <code>bugs</code> 的值为一个普通字符串而不是一个 object。</p><p>如果提供了 url，那么它将会被 <code>npm bugs</code> 命令使用。</p><h2 id="license">license <a href="#license">#</a></h2><p>可以为你的包指定一个许可证，让别人知道使用该包是否有许可限制。</p><p>如果指定了一个常规的许可，例如 <code>BSD-2-Clause</code> 或者 <code>MIT</code>, 需要为正在使用的许可证添加当前的 SPDX 许可证标识符：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"BSD-3-Clause"</span> <span class="hljs-punctuation">}</span>
</code></pre><p>你可以查看<a href="https://spdx.org/licenses/">SPDX 许可证 IDS 完整列表</a>。通常你应该选择 <a href="https://opensource.org/licenses/alphabetical">OSI</a> 认可的许可证。</p><p>如果包含多个许可，可以使用 <a href="https://www.npmjs.com/package/spdx">SPDX 许可表达式语法 v2.0</a>，像下面这样：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"(ISC OR GPL-3.0)"</span> <span class="hljs-punctuation">}</span>
</code></pre><p>如果你正在使用的许可，不在 SPDX 范围内，或者你正在使用一个自定义的许可证，那么你可以像下面这样指定：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"SEE LICENSE IN &lt;filename&gt;"</span> <span class="hljs-punctuation">}</span>
</code></pre><p>然后在包的根路径下包含 <code>&lt;filename&gt;</code> 文件。</p><p>一些很久之前的包使用 objects 或者包含许可 object 数组的 <code>licenses</code> 属性指定许可：</p><pre><code class="hljs language-json"><span class="hljs-comment">// Not valid metadata</span>
<span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span> <span class="hljs-punctuation">:</span>
    <span class="hljs-punctuation">{</span> 
        <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://opensource.org/licenses/ISC"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// Not valid metadata</span>
<span class="hljs-punctuation">{</span> <span class="hljs-attr">"licenses"</span> <span class="hljs-punctuation">:</span>
    <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://www.opensource.org/licenses/mit-license.php"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Apache-2.0"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://opensource.org/licenses/apache2.0.php"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>这些风格目前已经被丢弃了。使用 SPDX 表达式代替：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"(MIT OR Apache-2.0)"</span> <span class="hljs-punctuation">}</span>
</code></pre><p>最后，如果你不希望在任何条款下授予他人使用私有或未发布的软件包的权利，可以这样指定：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"UNLICENSED"</span> <span class="hljs-punctuation">}</span>
</code></pre><p>也可以考虑设置 <code>"private": true</code> ，防止意外发布。</p><h2 id="人员字段：author, contributors">人员字段：author, contributors <a href="#人员字段：author, contributors">#</a></h2><p><code>author</code> 是一个 person，<code>contributors</code> 是一个 person 数组。 person 是一个包含 <code>name</code> 属性和可选择的 <code>url</code>、<code>email</code> 属性的 object。像这样：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> 
    <span class="hljs-attr">"name"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"Barney Rubble"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"email"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"b@rubble.com"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"http://barnyrubble.tumblr.com/"</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>或者你可以用下面的字符串简写，npm 会替你解析下面的字符串：</p><pre><code class="hljs language-json"><span class="hljs-string">"Barney Rubble &lt;b@rubble.com&gt; (http://barnyrubble.tumblr.com/)"</span>
</code></pre><p>emial 和 url 是可选择的字段。</p><p>npm 会用你的 npm 用户信息，设置一个顶级的 <code>maintainers</code> 字段。</p><h2 id="funding">funding <a href="#funding">#</a></h2><p>你可以指定一个包含 URL 的 object，该 object 提供了资助你的包的开发的最新信息，可以是一个字符串 URL，也可以是一个数组：</p><pre><code class="hljs language-json"><span class="hljs-attr">"funding"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"individual"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"http://example.com/donate"</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-attr">"funding"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"patreon"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://www.patreon.com/my-account"</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-attr">"funding"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://example.com/donate"</span>

<span class="hljs-attr">"funding"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"individual"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"http://example.com/donate"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"http://example.com/donateAlso"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"patreon"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://www.patreon.com/my-account"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre><p>用户可以使用 <code>npm fund</code> 命令，列出项目所有依赖包的 funding url。也可以使用 <code>npm fund &lt;projectname&gt;</code> 列出指定包的 funding url（当有多个 URLS，第一个会被访问）。</p><h2 id="files">files <a href="#files">#</a></h2><p>可选择的 <code>files</code> 字段，是一个文件匹配字符串，当你的包被安装为一个项目依赖时，被 <code>files</code> 字段指定的文件将会被包含。文件匹配采用的语法类似于 <code>.gitignore</code> 文件。忽略该字段，等价于 <code>["*"]</code>，表示包含所有文件。</p><p>一些特殊的文件，会被包含或者排除，无论它们是否被 <code>files</code> 字段指定（看下面）。</p><p>你还可以在包根目录或者子目录下提供一个 <code>.npmignore</code> 文件，与 <code>.gitignore</code> 类似，它会防止文件被包含。如果 <code>.npmignore</code> 在包的根目录下，它不会覆盖 <code>files</code> 字段内容，但是如果 <code>.npmignore</code> 在子目录下，则会覆盖 <code>files</code> 字段内容。如果有 <code>.gitignore</code> 文件，却没有 <code>.npmignore</code> 文件，那么会默认使用 <code>.gitignore</code> 文件内容作为 <code>.npmignore</code> 的内容。</p><p><code>files</code> 字段指定的文件，不能通过 <code>.npmignore</code> 或者 <code>.gitignore</code> 排除。</p><p>一些文件会永远被包含在包内，无论怎么设置：</p><ul><li><code>package.json</code></li><li><code>README</code></li><li><code>CHANGES</code> / <code>CHANGELOG</code> / <code>HISTORY</code></li><li><code>LICENSE</code> / <code>LICENCE</code></li><li><code>NOTICE</code></li><li>"main" 字段指定的文件</li></ul><p><code>README</code>, <code>CHANGES</code>, <code>LICENSE</code> &amp; <code>NOTICE</code> 可以是任意文件扩展名。</p><p>一些文件会永远被排除在包外，无论怎么设置：</p><ul><li><code>.git</code></li><li><code>CVS</code></li><li><code>.svn</code></li><li><code>.hg</code></li><li><code>.lock-wscript</code></li><li><code>.wafpickle-N</code></li><li><code>.DS_Store</code></li><li><code>npm-debug.log</code></li><li><code>.npmrc</code></li><li><code>node_modules</code></li><li><code>config.gypi</code></li><li><code>package-lock.json</code></li><li>所有包含 <code>*</code> 字符的文件 (与 Windows 不兼容)</li></ul><h2 id="main">main <a href="#main">#</a></h2><p><code>main</code> 字段是一个模块 ID，只是了你的程序的入口点。如果你的包名为 <code>foo</code>，用户安装了你的包，并且使用 <code>require("foo")</code> 导入你的包，然后你的程序的 <code>package.json</code> 文件的 <code>main</code> 字段指定的文件导出的对象将会被返回。</p><p>它应该是一个相对于包的根路径的 module ID。</p><p>对于大多数模块来说，有一个主脚本，而没有太多其他的东西，是最有意义的。</p><h2 id="browser">browser <a href="#browser">#</a></h2><p>如果你的包打算被用于客户端程序，那么 <code>browser</code> 字段应该被指定，而不是 <code>main</code> 字段。这可以提示用户，它或许依赖于一些基础的在nodejs 环境下没有的东西（比如 <code>window</code>）。</p><pre><code class="hljs language-json"><span class="hljs-attr">"browser"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./lib/browser/main.js"</span>
</code></pre><h2 id="bin">bin <a href="#bin">#</a></h2><p>很多包拥有一个或者多个可执行文件，并且希望安装在 PATH 中。npm 可以很简单的实现这个（实际上，就是使用这个特性安装的 npm 可执行文件）。</p><p>为了使用这个特性，需要在 package.json 文件中指定 <code>bin</code> 字段，它表示命令与本地文件名称的映射关系。当进行全局安装时，npm 将这个文件与 <code>prefix/bin</code> 进行符号连接（symlink），进行本地安装时，会将这个文件与 <code>node_modules/.bin/</code> 进行符号连接。</p><p>例如，<code>myapp</code> 的 <code>package.json</code> 包含以下内容：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"bin"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"myapp"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"./cli.js"</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
</code></pre><p>当你全局安装 <code>myapp</code> 时， npm 会从 <code>cli.js</code> 脚本创建一个符号连接至 <code>usr/local/bin/myapp</code> 目录。</p><p>如果你只有一个可执行文件，那么你可以提供一个字符串，像这样：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-program"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.2.5"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"bin"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./path/to/program"</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>上面的写法，等价于：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-program"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.2.5"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"bin"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"my-program"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"./path/to/program"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>最后，请确保 <code>bin</code> 字段引用的文件内容以 <code>#!/usr/bin/env node</code> 开头，用于指示该脚本的执行需要 node。</p><h2 id="directories">directories <a href="#directories">#</a></h2><p>通过该字段描述包的文档结构，很少使用。</p><ol><li><p>directories.lib</p></li><li><p>directories.bin</p></li><li><p>directories.man</p></li><li><p>directories.doc</p></li><li><p>directories.example</p></li><li><p>directories.test</p></li></ol><h2 id="repository">repository <a href="#repository">#</a></h2><p>说明包的代码仓库在哪里。如果 git 仓库在 Github 上，使用 <code>npm docs</code> 命令，会跳转到仓库页面。</p><pre><code class="hljs language-json"><span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/npm/cli.git"</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"svn"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://v8.googlecode.com/svn/trunk/"</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>如果是 Github，Github gist Bitbucker 或者 GitLab 仓库，你可以使用简写的方式：</p><pre><code class="hljs language-json"><span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm/npm"</span>

<span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"github:user/repo"</span>

<span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gist:11081aaa281"</span>

<span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bitbucket:user/repo"</span>

<span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gitlab:user/repo"</span>
</code></pre><p>如果 <code>package.json</code> 文件不在项目的根目录下，你可以指定包所在的目录：</p><pre><code class="hljs language-json"><span class="hljs-attr">"repository"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/facebook/react.git"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"directory"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/react-dom"</span>
<span class="hljs-punctuation">}</span>
</code></pre><h2 id="scripts">scripts <a href="#scripts">#</a></h2><p><code>scripts</code> 属性是一个包含脚本命令的字典，这些命令在包的生命周期的不同时间运行。</p><p>在 <a href="https://docs.npmjs.com/cli/v6/using-npm/scripts">scripts</a> 页面可以获得更多详细信息。</p><h2 id="config">config <a href="#config">#</a></h2><p><code>config</code> 对象可以被用来配置 scripts 的参数，例如：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> 
    <span class="hljs-attr">"name"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"foo"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"config"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"port"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"8080"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>有一个 start 命令，并且可以通过 <code>npm_package_config_port</code> 变量引用设置的 port。用户也可以通过 <code>npm config set foo:port 8001</code> 覆盖配置。</p><p>可以在 <a href="https://docs.npmjs.com/cli/v6/using-npm/config">config</a> 和 <a href="https://docs.npmjs.com/cli/v6/using-npm/scripts">scripts</a> 获取更多信息。</p><h2 id="dependencies">dependencies <a href="#dependencies">#</a></h2><p>指定项目依赖，值为包名加上版本号。</p><p>版本号可以指定一个范围，有以下语法。</p><ul><li><code>version</code>：精确的版本，例如 <code>1.0.0</code></li><li><code>&gt;version</code>：大于 <code>version</code></li><li><code>&gt;=version</code>：大于等于</li><li><code>&lt;version</code>: 小于</li><li><code>&lt;=version</code>: 小于等于</li><li><code>~version</code>: 允许补丁级别的变化，例如 <code>~1.2.3</code> 表示 <code>&gt;=1.2.3 &lt;1.3.0</code></li><li><code>^version</code>：允许不更改最左侧非0版本号数字的变化，例如 <code>^1.2.3</code> 表示 <code>&gt;=1.2.3 &lt;2.0.0</code></li><li><code>1.2.x</code></li><li><code>http://...</code></li><li><code>*</code></li><li><code>version1 - version2</code> 等同于 <code>&gt;=version1 &lt;=version2</code></li></ul><p>可以在 <a href="https://docs.npmjs.com/cli/v6/using-npm/semver">semver</a> 获取更多关于 version 的信息。</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> 
    <span class="hljs-attr">"dependencies"</span> <span class="hljs-punctuation">:</span>
    <span class="hljs-punctuation">{</span> 
        <span class="hljs-attr">"foo"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0 - 2.9999.9999"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"bar"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=1.0.2 &lt;2.1.2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"baz"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;1.0.2 &lt;=2.3.4"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"boo"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"qux"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"asd"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"http://asdf.com/asdf.tar.gz"</span><span class="hljs-punctuation">,</span> 
        <span class="hljs-attr">"til"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"~1.2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"elf"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"~1.2.3"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"two"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"2.x"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"thr"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"3.3.x"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lat"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"latest"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dyl"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"file:../dyl"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>可以使用 URL 代替版本号。</p><p>也可以使用本地路径。</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"baz"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"bar"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:../foo/bar"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><h2 id="devDependencies">devDependencies <a href="#devDependencies">#</a></h2><p>适用于开发环境的依赖包。</p><h2 id="peerDependencies">peerDependencies <a href="#peerDependencies">#</a></h2><p>防止包重复安装的字段。</p><p>举个例子，假设你的程序依赖了 A、B 和 C 三个包，同时 B 和 C 又依赖了 A，那么当你安装 A、B、C 时，B 和 C 又会重复安装 A，所以可以将 A 添加到 C 的 <code>peerDependencies</code> 字段下，这样当你的程序安装依赖时，A 只会被安装一次，B 和 C 不会重复安装 A。</p><p>一般用于指定当前包兼容的宿主版本，例如我们要编写一个 webpack 插件，当前插件兼容的 webpack 为 <code>3.x</code>, 此时我们可以这样指定：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"webpack"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3.x"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><h2 id="bundledDependencies">bundledDependencies <a href="#bundledDependencies">#</a></h2><p>打包依赖，在发布时会将这个对象指定的包，一起打包到最终要发布的包里。</p><h2 id="optionalDependencies">optionalDependencies <a href="#optionalDependencies">#</a></h2><p>可选依赖包，如果一些包，即使安装失败，项目仍然能够正常运行，或者希望 npm 继续运行，就可以使用该字段指定可选包。</p><h2 id="engines">engines <a href="#engines">#</a></h2><p>可以指定一些运行环境，例如 node 和 npm：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span> 
    <span class="hljs-attr">"engines"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"node"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=0.10.3 &lt;0.12"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"npm"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"~1.0.20"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><h2 id="参考">参考 <a href="#参考">#</a></h2><ul><li><a href="https://docs.npmjs.com/cli/v6/configuring-npm/package-json">package.json docs</a></li></ul><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/blogs/developer-handbook/original-inverse-complement-code">上一篇：计算机是如何存储整数的—原码、反码、补码</a></span><span class="next-article"><a href="/blogs/minicode/hextris">下一篇：hextris</a></span></div></div><div class="toc"><div class="toc-header">目录</div><div class="toc-body"><div class="toc-item"><a class="toc-item-link" href="#package.json 指南" style="padding-left:15px">package.json 指南</a></div><div class="toc-item"><a class="toc-item-link" href="#描述" style="padding-left:30px">描述</a></div><div class="toc-item"><a class="toc-item-link" href="#name" style="padding-left:30px">name</a></div><div class="toc-item"><a class="toc-item-link" href="#version" style="padding-left:30px">version</a></div><div class="toc-item"><a class="toc-item-link" href="#description" style="padding-left:30px">description</a></div><div class="toc-item"><a class="toc-item-link" href="#keywords" style="padding-left:30px">keywords</a></div><div class="toc-item"><a class="toc-item-link" href="#homepage" style="padding-left:30px">homepage</a></div><div class="toc-item"><a class="toc-item-link" href="#bugs" style="padding-left:30px">bugs</a></div><div class="toc-item"><a class="toc-item-link" href="#license" style="padding-left:30px">license</a></div><div class="toc-item"><a class="toc-item-link" href="#人员字段：author, contributors" style="padding-left:30px">人员字段：author, contributors</a></div><div class="toc-item"><a class="toc-item-link" href="#funding" style="padding-left:30px">funding</a></div><div class="toc-item"><a class="toc-item-link" href="#files" style="padding-left:30px">files</a></div><div class="toc-item"><a class="toc-item-link" href="#main" style="padding-left:30px">main</a></div><div class="toc-item"><a class="toc-item-link" href="#browser" style="padding-left:30px">browser</a></div><div class="toc-item"><a class="toc-item-link" href="#bin" style="padding-left:30px">bin</a></div><div class="toc-item"><a class="toc-item-link" href="#directories" style="padding-left:30px">directories</a></div><div class="toc-item"><a class="toc-item-link" href="#repository" style="padding-left:30px">repository</a></div><div class="toc-item"><a class="toc-item-link" href="#scripts" style="padding-left:30px">scripts</a></div><div class="toc-item"><a class="toc-item-link" href="#config" style="padding-left:30px">config</a></div><div class="toc-item"><a class="toc-item-link" href="#dependencies" style="padding-left:30px">dependencies</a></div><div class="toc-item"><a class="toc-item-link" href="#devDependencies" style="padding-left:30px">devDependencies</a></div><div class="toc-item"><a class="toc-item-link" href="#peerDependencies" style="padding-left:30px">peerDependencies</a></div><div class="toc-item"><a class="toc-item-link" href="#bundledDependencies" style="padding-left:30px">bundledDependencies</a></div><div class="toc-item"><a class="toc-item-link" href="#optionalDependencies" style="padding-left:30px">optionalDependencies</a></div><div class="toc-item"><a class="toc-item-link" href="#engines" style="padding-left:30px">engines</a></div><div class="toc-item"><a class="toc-item-link" href="#参考" style="padding-left:30px">参考</a></div></div></div></div></body></html>