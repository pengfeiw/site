<html lang="zh_cn"><head><title>构造立体几何法（Constructive Solid Geometry） —— 计算机几何 | 王鹏飞</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="constructive solid geometry,csg,构造立体几何法,CAD,计算机几何,计算机图形学,CG"><meta name="description" content="Constructive solid geometry，中文名为构造立体几何法，是另一种实体模型表示方法，通过布尔运算将简单的基本实体拼合成复杂实体的描述方法"><link rel="stylesheet" href="/blogs/assests/code_github.css"><link rel="stylesheet" href="/blogs/assests/github_markdown.css"><link rel="stylesheet" href="/blogs/assests/article.css"><link rel="stylesheet" href="/blogs/assests/navigator.css"><link rel="icon" href="/blogs/assests/images/icon.jpg"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("search-input").addEventListener("search",e=>{e.target.value&&window.open(`https://bing.com/search?q=${e.target.value}%20site%3A+pengfeixc.com`,"_blank")})})</script></head><body><div class="header"><div class="navigator"><div class="links"><div class="home"><a href="/blogs">Home</a></div><div class="email"><a href="mailto:pengfeixc@sina.com">Email</a></div><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div clss="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="search"><input id="search-input" type="search" placeholder="search"></div><div class="rss"><a href="/blogs/rss.xml"><img src="/blogs/assests/images/rss.svg" alt="rss"></a></div></div></div></div><div class="body"><div class="nothing"></div><div class="markdown"><div class="markdown-header"><span class="date">日期：2023年10月5日</span><span class="category"><a href="/blogs/computer-graphics">标签：ComputerGraphics</a></span></div><div class="markdown-body"><h1 id="Constructive Solid Geometry（构造立体几何法）">Constructive Solid Geometry（构造立体几何法） <a href="#Constructive Solid Geometry（构造立体几何法）">#</a></h1><p>Constrcutive Solid Geometry，中文翻译为构造立体几何法，简称为 CSG。是与 B-rep 不同的另一种几何实体模型表示方法。本篇内容主要介绍与之相关联的一些基础概念。不涉及详细的构造算法。</p><p>将一些 <strong>基础实体（primitive solids）</strong> 通过 <strong>布尔运算（union，intersection，differrence）</strong> 组合成一个复杂的实体的过程，就是 CSG 造体过程。</p><h2 id="基础实体（Primitives）">基础实体（Primitives） <a href="#基础实体（Primitives）">#</a></h2><p>标准的 CSG Primitives 共 6 种：立方体（cube），三棱柱（triangular prism），球体（sphere），圆柱体（cylinder），圆锥体（cone）和圆环（torus）。将这 6 种基础实体变换（例如缩放，平移和旋转）到合适的位置，然后再做布尔运算即可得到复杂实体，这个过程就是 CSG。</p><p>CSG 的描述过程可以简记为一个 CSG 表达式：</p><pre><code>translate(scale(Block, &lt;2.5, 1.5, 1.5&gt;), &lt;3, 2, 3&gt;)
</code></pre><p>上面的 CSG 公式表示将 Block 的 <code>x，y，z</code> 分量分别缩放 <code>2.5，1.5，1.5</code> 倍后，然后将 Block 的位置的 <code>x,y,z</code> 坐标分别加 <code>3,2,3</code> 以实现平移。</p><p>一般操作用如下符号表示：</p><ul><li>translate：平移</li><li>scale：缩放</li><li>rotate：旋转</li></ul><h2 id="布尔操作（Boolean Operators）">布尔操作（Boolean Operators） <a href="#布尔操作（Boolean Operators）">#</a></h2><p>给定两个点集合 A 和 B，A 和 B 之间的布尔操作包括：</p><ul><li>union（并集）：A 和 B 的并集表示 A 和 B 所有点组合在一起的集合 C，集合 C 中任意一点要么属于 A 要么属于 B，记 <code>A ∪ B</code>。</li><li>difference（差集）：A 和 B 的差集构成集合 C，集合 C 中任意一点必定属于 A 但是不属于 集合 B，记作 <code>A - B</code>。</li><li>intersection（交集）：A 和 B 的交集构成集合 C，集合 C 中任意一点必定属于 A 也必定属于 B，记作 <code>A ∩ B</code>。</li></ul><p>下图中，A 是竖直的圆柱体，B 是水平的圆柱体，从左至右依次为：<code>A ∪ B</code>，<code>A ∩ B</code>，<code>A - B</code>, <code>B - A</code>。</p><p><img src="../static/images/31.jpg" alt="Boolean Operators"></p><p>因此，实体可以被视为将布尔运算符应用于一组基础实体的结果。</p><p>让我们看一个简单的例子。我们想要设计一个类似括号的形状，带有一个孔，如下图最右图所示。我们从两个块实例和一个圆柱体实例（最左边的图）开始。然后，缩放两个块并将其中一个旋转到垂直位置。圆柱体也进行了缩放，使其半径与孔的半径相匹配。然后，这三个实例被转换到它们想要的位置。通过计算两个块的并集，然后从中减去圆柱体，获得最终的产品。</p><p><img src="../static/images/32.jpg" alt="Boolean Operators"></p><p>上述布尔过程并不是唯一的。例如，L 形状可以通过将一个立方体减去另一个立方体来构造。</p><h2 id="CSG 表达式和 CSG 树">CSG 表达式和 CSG 树 <a href="#CSG 表达式和 CSG 树">#</a></h2><p>上述的布尔过程可以用一个 CSG 表达式表示：</p><pre><code>diff(union(trans(Block1), trans(Block2)), trans(Cylinder))
</code></pre><p>也可以转换为一棵 CSG 树：</p><p><img src="../static/images/33.jpg" alt="csg expression tree"></p><p>每种 CSG 构造过程都可以用 CSG 表达式表示，也可以用 CSG 表达式树表示。</p><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/blogs/computer-graphics/euler-poincare-Formula">上一篇：欧拉泊松公式 —— 计算机几何</a></span><span class="next-article"><a href="/blogs/developer-handbook/vim-buffer">下一篇：vim buffer</a></span></div></div><div class="toc"><div class="toc-header">目录</div><div class="toc-body"><div class="toc-item"><a class="toc-item-link" href="#Constructive Solid Geometry（构造立体几何法）" style="padding-left:15px">Constructive Solid Geometry（构造立体几何法）</a></div><div class="toc-item"><a class="toc-item-link" href="#基础实体（Primitives）" style="padding-left:30px">基础实体（Primitives）</a></div><div class="toc-item"><a class="toc-item-link" href="#布尔操作（Boolean Operators）" style="padding-left:30px">布尔操作（Boolean Operators）</a></div><div class="toc-item"><a class="toc-item-link" href="#CSG 表达式和 CSG 树" style="padding-left:30px">CSG 表达式和 CSG 树</a></div></div></div></div></body></html>