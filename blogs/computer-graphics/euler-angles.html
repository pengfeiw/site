<html lang="zh_cn"><head><title>欧拉角 | 王鹏飞</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="euler angles,heading-pitch-bank,roll-pitch-yaw,Gimbal Lock,方位,万向锁,万向节。"><meta name="description" content="欧拉角的基本思想，如何用欧拉角描述物体的方位。"><link rel="stylesheet" href="/blogs/assests/code_github.css"><link rel="stylesheet" href="/blogs/assests/github_markdown.css"><link rel="stylesheet" href="/blogs/assests/article.css"><link rel="stylesheet" href="/blogs/assests/navigator.css"><link rel="stylesheet" href="/blogs/assests/global.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="icon" href="/blogs/assests/images/icon.jpg"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("search-input").addEventListener("search",e=>{e.target.value&&window.open(`https://bing.com/search?q=${e.target.value}%20site%3A+pengfeixc.com`,"_blank")})})</script></head><body><div class="header"><div class="navigator"><div class="links"><div class="home"><a href="/blogs">Home</a></div><div class="email"><a href="mailto:pengfeixc@sina.com">Email</a></div><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div clss="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="search"><input id="search-input" type="search" placeholder="search"></div><div class="rss"><a href="/blogs/rss.xml"><img src="/blogs/assests/images/rss.svg" alt="rss"></a></div></div></div></div><div class="body"><div class="nothing"></div><div class="markdown"><div class="markdown-header"><span class="date">日期：2024年5月14日</span><span class="category"><a href="/blogs/computer-graphics">标签：ComputerGraphics</a></span></div><div class="markdown-body"><h1 id="欧拉角">欧拉角 <a href="#欧拉角">#</a></h1><h2 id="方位">方位 <a href="#方位">#</a></h2><p>在讨论欧拉角前，我想阐明一个概念：方位（orientation）。方位与方向（direction）不同，可以用向量描述方向，但是不能用一个向量描述一个方位，当将一个向量绕轴自转时，向量不会有任何变化。</p><p><img src="../static/images/58.jpg" alt="向量"></p><p>然而当一个物体朝向一个特定的方向，让其按照向量一样自转时，物体的方位发生了变化。</p><p><img src="../static/images/59.jpg" alt="方位"></p><p>描述一个物体的方位时，通常是相对于一个已知方位的<strong>旋转</strong>描述的，旋转的量称为<strong>角位移</strong>。所以描述方位等价于描述角位移。</p><p>描述方位有三种方式：</p><ul><li>矩阵</li><li>欧拉角</li><li>四元数</li></ul><p>本篇文章介绍欧拉角。</p><h2 id="基本思想">基本思想 <a href="#基本思想">#</a></h2><p>欧拉角的基本思想是将角位移分解为绕三个互相垂直轴的三个旋转组成的序列。其实任意三个轴和任意顺序都是可以的，一般使用笛卡尔坐标系的三个轴，并按照一定顺序所组成的旋转序列。这里介绍最常用的 ”heading-pitch-bank" 系统。</p><p>最初让物体开始于"标准方位"——物体局部坐标系与世界坐标系的轴重合。然后依次做 heading 旋转，然后做 pitch 旋转，最后做 bank 旋转。</p><ul><li>heading 旋转：绕 y 轴旋转一定角度，因为最开始位于标准方位，所以 y 轴即是世界坐标系轴，也是物体局部坐标系轴。</li><li>pitch 旋转：绕物体局部坐标系的 x 轴旋转一定角度。</li><li>bank 旋转：绕物体局部坐标系的 z 轴旋转一定角度。</li></ul><p>下面依次是原始方位，做 heading-pitch-bank 旋转的示意图。</p><p><img src="../static/images/60.jpg" alt="identity orientation"> <img src="../static/images/61.jpg" alt="heading rotate"></p><p><img src="../static/images/62.jpg" alt="pitch rotate"> <img src="../static/images/63.jpg" alt="bank rotate"></p><h3 id="其他约定">其他约定 <a href="#其他约定">#</a></h3><ul><li>heading-pitch-bank: 也有其他系统名称，例如 roll-pitch-yaw，其中 roll 等价于 bank，yaw 等价于 heading。他的顺序和 heading-pitch-bank 顺序相反，它定义了向量从物体坐标系到世界坐标系的旋转顺序。</li><li>任意三个轴都能作为旋转轴，不一定使用笛卡尔坐标系轴，但是笛卡尔轴比较有意义。</li><li>旋转的正方向可以是左手法则也可以遵循右手法则，按照一定规则定义即可。</li><li>旋转可以以不同顺序进行，顺序并不重要。</li></ul><p>只要理解其原理即可。</p><h3 id="优点">优点 <a href="#优点">#</a></h3><ul><li>简单易于使用。</li><li>与矩阵相比，占用内存小，只需要三个数字即可。</li></ul><h3 id="缺点">缺点 <a href="#缺点">#</a></h3><p>主要的缺点有两个：</p><ul><li>给定方位的表达式不唯一。</li><li>两个角度间求插值非常麻烦。</li></ul><p>这里仅讨论第一个缺点。将一个角度加上 360 度的倍数，显然不会改变方位。另外 pitch 135 度等价于 heading 180 度，pitch 45 度，然后 bank 180 度。</p><p>为了保证任意方位都只是独一无二的，必须限制角度的范围。一种技术是将 heading 和 bank 限制在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup><mo separator="true">,</mo><mo>+</mo><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-180^\circ, +180^\circ]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">18</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">+</span><span class="mord">18</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> 之间，pitch 限制在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>9</mn><msup><mn>0</mn><mo>∘</mo></msup><mo separator="true">,</mo><mo>+</mo><mn>9</mn><msup><mn>0</mn><mo>∘</mo></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-90^\circ, +90^\circ]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">+</span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> 之间。</p><p>还有一个著名的问题是<strong>万向锁（Gimbal Lock）</strong>，举个例子，先 heading <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><msup><mn>5</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">45^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6741em"></span><span class="mord">4</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span> 再 pitch <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><msup><mn>0</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">90^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6741em"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span>，与先 pitch <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><msup><mn>0</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">90^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6741em"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span> 再 bank <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><msup><mn>5</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">45^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6741em"></span><span class="mord">4</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span> 是一样的。原因是一旦选择 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mn>9</mn><msup><mn>0</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">\pm90^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7574em;vertical-align:-.0833em"></span><span class="mord">±</span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.6741em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span> 为 pitch 角，第一次和第三次旋转的旋转轴就都是竖直轴了，等价于损失了一个自由度，这种现象被称为万向锁。</p><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/blogs/algorithm-math/linear-spaces">上一篇：线性系统</a></span><span class="next-article"><a href="/blogs/computer-graphics/Quaternion">下一篇：四元数</a></span></div></div><div class="toc"><div class="toc-header">目录</div><div class="toc-body"><div class="toc-item"><a class="toc-item-link" href="#欧拉角" style="padding-left:15px">欧拉角</a></div><div class="toc-item"><a class="toc-item-link" href="#方位" style="padding-left:30px">方位</a></div><div class="toc-item"><a class="toc-item-link" href="#基本思想" style="padding-left:30px">基本思想</a></div><div class="toc-item"><a class="toc-item-link" href="#其他约定" style="padding-left:45px">其他约定</a></div><div class="toc-item"><a class="toc-item-link" href="#优点" style="padding-left:45px">优点</a></div><div class="toc-item"><a class="toc-item-link" href="#缺点" style="padding-left:45px">缺点</a></div></div></div></div></body></html>