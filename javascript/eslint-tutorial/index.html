<html lang="zh_cn"><head><title></title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="eslint,tutorial,frontend,configuration,前端,配置"><meta name="description" content="一份简洁的 ESLint 教程，如何在 webpack 中配置 ESLint，如何在 vscode 中配置 ESLint。"><link rel="stylesheet" href="/assests/code_github.css"><link rel="stylesheet" href="/assests/github_markdown.css"><link rel="stylesheet" href="/assests/article.css"><link rel="stylesheet" href="/assests/navigator.css"><meta property="author" content="王鹏飞"><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("search-input").addEventListener("search",e=>{e.target.value&&window.open(`https://bing.com/search?q=${e.target.value}%20site%3A+pengfeixc.com`,"_blank")})})</script></head><body><div class="header"><div class="navigator"><div class="links"><div class="github"><a target="_blank" href="https://github.com/pengfeiw">GitHub</a></div><div clss="minicode"><a target="_blank" href="https://pengfeiw.github.io/minicode">MiniCode</a></div><div class="search"><input id="search-input" type="search" placeholder="search"></div><div class="rss"><a href="/rss.xml"><img src="/assests/images/rss.png" alt="rss"></a></div></div></div><h1><a href="/"><img src="https://avatars.githubusercontent.com/u/37898750?s=400&amp;u=33f96e0bbc5bee7a7d1fa8f1eecee9a3d4a6d96c&amp;v=4"></a></h1></div><div class="markdown"><div class="markdown-header"><span class="date">日期：2022年6月21日</span><span class="category"><a href="/javascript">标签：JavaScript</a></span></div><div class="markdown-body"><h1 id="ESLint 教程">ESLint 教程 <a href="#ESLint 教程">#</a></h1><p>本文介绍 ESLint 的一些基本概念，以及如何在 webpack 和 vscode 中配置 ESLint。</p><h2 id="为什么需要 ESLint ？">为什么需要 ESLint ？ <a href="#为什么需要 ESLint ？">#</a></h2><p>JavaScript 与其他语言不同的是，它没有一个预编译检查的过程，如果你的代码存在错误，那么错误只能在程序运行后才会暴漏出来，这种错误的暴露方式大大影响了开发的效率。另一方面，因为 JavaScript 是动态语言，如果一个团队在开发时，没有按照一定的规范去写代码，大家都按照各自的风格去添加代码，随着时间的流逝和代码量的提高，项目只会变得越来越难以维护。所以前端开发需要 Lint 工具去约束检查代码。ESLint 是目前比较流行的一个 Lint 工具，也是本文的主角。</p><blockquote><p>如果想了解更多 Lint 工具，我推荐你阅读这篇文章：<a href="https://www.sitepoint.com/comparison-javascript-linting-tools/">A Comparison of JavaScript Linting Tools</a></p></blockquote><h2 id="安装">安装 <a href="#安装">#</a></h2><p><strong>ESLint 支持 jsx 和 ES6 语法，并且高度可配置</strong>，这也是它比较流行的一个原因。</p><p>首先安装 <code>eslint</code>、<code>eslint-webpack-plugin</code> 和 <code>@babel/eslint-parser</code>：</p><pre><code class="hljs language-bash">npm install --save-dev eslint eslint-webpack-plugin @babel/eslint-parser
</code></pre><h2 id="%3Ccode%3Ewebpack.config.js%3C/code%3E%20%E5%92%8C%20%3Ccode%3E.eslintrc%3C/code%3E"><code>webpack.config.js</code> 和 <code>.eslintrc</code> <a href="#%3Ccode%3Ewebpack.config.js%3C/code%3E%20%E5%92%8C%20%3Ccode%3E.eslintrc%3C/code%3E">#</a></h2><p>打开 <code>webpack.config.js</code> 文件，添加如下内容：</p><pre><code class="hljs language-js">...
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ESLintPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'eslint-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    ...
    <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">ESLintPlugin</span>()],
    ...
};
</code></pre><blockquote><p>这里有一个 <a href="https://pengfeixc.com/blogs/javascript/webpack-tutorial">webpack 入门教程</a></p></blockquote><p>在项目根目录下新建 <code>.eslintrc</code> 文件，<code>.eslintrc</code> 文件是 eslint 的配置文件，在里面添加 eslint rules。</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"parser"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@babel/eslint-parser"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>上面指定了 <code>"parser" "@babel/eslint-parser"</code>，是为了使 ESLint 支持 es6 的语法。</p><blockquote><p>这里有一个 <a href="https://pengfeixc.com/blogs/javascript/babel-tutorial">babel 入门教程</a></p></blockquote><h2 id="ESLint 规则">ESLint 规则 <a href="#ESLint 规则">#</a></h2><p>eslint 的规则的值可以是数字值 <code>0-2</code>，也可以是数组格式。</p><p>数值 <code>0-2</code>：</p><ul><li><code>0</code>：关闭规则</li><li><code>1</code>：开启规则，当不满足规则时，发出警告（warning）信息</li><li><code>2</code>：开启规则，当不满足规则时，发出错误（error）信息</li></ul><p>也可以使用数组设置额外的信息：</p><pre><code>// 使用额外的设置，当不满足规则时，发出错误信息
"brace-style": [2, "1tbs", { "allowSingleLine": false }]
</code></pre><h2 id="%3Ccode%3Eextends%3C/code%3E"><code>extends</code> <a href="#%3Ccode%3Eextends%3C/code%3E">#</a></h2><p>如果有多个项目，需要使用同一套规则，可以发布一个包含这些 ESLint 规则的 package，只需要使用 <code>extends</code> 字段引入这个 package 即可。目前已经存在很多这样的 package 了，比较流行的是 <a href="https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb">Airbnb ESLint configuration</a>，可以在<a href="https://github.com/airbnb/javascript">这里</a>看到它所基于的规范的详细信息。</p><p>安装 <code>eslint-config-airbnb</code>：</p><pre><code class="hljs language-bash">npx install-peerdeps --dev eslint-config-airbnb
</code></pre><p>配置文件，添加 <code>extends</code> 字段：</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"parser"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@babel/eslint-parser"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"airbnb"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><h2 id="vscode 中配置 ESLint">vscode 中配置 ESLint <a href="#vscode 中配置 ESLint">#</a></h2><p>可以在 vscdoe 中安装插件 <code>ESLint</code>，并在 <code>settings.json</code> 中添加如下设置。</p><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"source.fixAll.eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"eslint.validate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"javascript"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"javascriptreact"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"typescript"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"typescriptreact"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"vue"</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre><p><code>editor.codeActionsOnSave</code> 表示每次保存时，会自动修复一些 lint 错误，<code>eslint.validate</code> 表示验证支持的 Language。</p><h2 id="附参考资料">附参考资料 <a href="#附参考资料">#</a></h2><ul><li><a href="https://github.com/microsoft/vscode-eslint">vscode-eslint</a></li><li><a href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide() {</a></li><li><a href="https://eslint.org/docs/user-guide/">ESLint User Guide</a></li></ul><p>（完）</p></div><div class="markdown-footer"><span class="pre-article"><a href="/site/big-company-vs-small-company">上一篇：去大公司还是小公司</a></span><span class="next-article"><a href="/developer-handbook/git-submodules">下一篇：Git Submodules</a></span></div></div></body></html>